"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var IconCaptchaPolyfills=function(){'use strict';return{extend:function(a){a=a||{};for(var b,c=1;c<arguments.length;c++)if(b=arguments[c],b)for(var d in b)b.hasOwnProperty(d)&&(a[d]="object"===_typeof(b[d])?b[d]instanceof Array?b[d].slice(0):IconCaptchaPolyfills.extend(a[d],b[d]):b[d]);return a},ajax:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a=a||{};var b=new XMLHttpRequest;if(b.open(a.type||"get",a.url,a.async||!0),a.success&&(b.onload=function(){if(200===b.status)try{a.success(JSON.parse(b.responseText))}catch(c){a.success(b.responseText)}else a.error&&a.error({message:"HTTP request returned with HTTP status code ".concat(b.status,".")})}),a.error&&(b.onerror=function(b){return a.error(b)}),!a.data)b.send();else if(a.crossDomain||b.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.processData=a.processData||!0,a.data instanceof FormData||a.processData){if(a.data=a.data||{},a.processData&&"object"===_typeof(a.data)){var c=new FormData;for(var d in a.data)c.append(d,a.data[d]);a.data=c}b.send(a.data)}else b.setRequestHeader("Content-Type","application/json"),b.send(JSON.stringify(a.data))},trigger:function(a,b,c){var d=null;window.CustomEvent&&"function"==typeof window.CustomEvent?d=new CustomEvent(b,{detail:c}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c)),a.dispatchEvent(d)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},offset:function(a){if(!a.getClientRects().length)return{top:0,left:0};var b=a.getBoundingClientRect(),c=a.ownerDocument.defaultView;return{top:b.top+c.pageYOffset,left:b.left+c.pageXOffset}},width:function(a){return parseFloat(getComputedStyle(a,null).width.replace("px",""))}}}();var IconCaptcha=function(){'use strict';var a={},b={general:{validationPath:null,fontFamily:null,credits:"show"},security:{clickDelay:1500,hoverDetection:!0,enableInitialMessage:!0,initializeDelay:500,selectionResetDelay:3e3,loadingAnimationDelay:1e3,invalidateTime:120000},messages:{initialization:{loading:"Loading challenge...",verify:"Verify that you are human."},header:"Select the image displayed the <u>least</u> amount of times",correct:"Verification complete.",incorrect:{title:"Uh oh.",subtitle:"You've selected the wrong image."},timeout:{title:"Please wait 60 sec.",subtitle:"You made too many incorrect selections."}}},c="https://www.fabianwennink.nl/projects/IconCaptcha",d="IconCaptcha by Fabian Wennink";a.init=function(a,c){if(!f(this.nodes)){this.nodes=document.querySelectorAll(a);var d=IconCaptchaPolyfills.extend({},b,c||{});return e(this.nodes,function(a,b){g(a,b,d)}),this}},a.$init=function(a,c){if(!f(this.nodes)){this.nodes=a;var d=IconCaptchaPolyfills.extend({},b,c||{});return e(this.nodes,function(a,b){g(a,b,d)}),this}},a.bind=function(a,b){return e(this.nodes,function(c){c.addEventListener(a,b)}),this};var e=function(a,b){for(var c=0;c<a.length;c++)b(a[c],c)},f=function(a){return!!a&&(console.error("IconCaptcha has already been initialized."),!0)},g=function(a,b,f){var g=Math.round;function h(){var a=E.getAttribute("data-theme")||"light";return E.classList.add("iconcaptcha-theme-"+a),f.general.fontFamily&&(E.style.fontFamily=f.general.fontFamily),!F&&f.security.enableInitialMessage?(x(),void j()):void(!I&&k(),p(),f.security.loadingAnimationDelay&&0<f.security.loadingAnimationDelay&&!f.security.enableInitialMessage?setTimeout(function(){return i(a)},f.security.loadingAnimationDelay):i(a))}function i(a){var b=w({i:D,a:1,t:a});IconCaptchaPolyfills.ajax({url:f.general.validationPath,type:"post",data:{requestPayload:b},success:function(a){if(a&&"string"==typeof a){var b=JSON.parse(atob(a));if(b.error)return void u(b.error,b.data);var c=w({i:D}),d=B.querySelector(".iconcaptcha-modal__body-icons");d.style.backgroundImage="url(".concat(f.general.validationPath,"?payload=").concat(c,")"),r(d),d.parentNode.insertAdjacentHTML("beforeend","<div class=\"iconcaptcha-modal__body-selection\"><i></i></div>"),C=B.querySelector(".iconcaptcha-modal__body-selection > i");var e=E.querySelector(".iconcaptcha-modal__body-selection");y(e),I||IconCaptchaPolyfills.trigger(E,"init",{captchaId:D});var g=B.querySelector(".iconcaptcha-modal__body-selection");return H=IconCaptchaPolyfills.width(g),J=new Date,I=!0,void(G=setTimeout(function(){return s(!0)},f.security.invalidateTime))}v(!0,"The IconCaptcha could not be loaded.","Invalid data was returned by the captcha back-end service. Make sure IconCaptcha is installed/configured properly.")},error:function(){return o()}})}function j(){var a=["<div class='iconcaptcha-modal'>","<div class='iconcaptcha-modal__body'>","<div class='iconcaptcha-modal__body-circle'></div>","<div class='iconcaptcha-modal__body-info'>","<a href='".concat(c,"' target='_blank' rel='follow' title='").concat(d,"'>IconCaptcha &copy;</a>"),"</div>","<div class='iconcaptcha-modal__body-title'>".concat(f.messages.initialization.verify,"</div>"),"</div>","</div>"];E.classList.add("iconcaptcha-init"),E.classList.remove("iconcaptcha-error","iconcaptcha-success"),E.innerHTML=a.join("")}function k(){var a=["<div class='iconcaptcha-modal'>","<div class='iconcaptcha-modal__header'>","<span>".concat(f.messages.header,"</span>"),"</div>","<div class='iconcaptcha-modal__body'>","<div class='iconcaptcha-modal__body-icons'></div>","</div>","<div class='iconcaptcha-modal__footer'>"];if("show"===f.general.credits||"hide"===f.general.credits){var b="hide"===f.general.credits?"display: none":"";a.push("<span style='".concat(b,"'><a href='").concat(c,"' target='_blank' rel='follow' title='").concat(d,"'>IconCaptcha</a> &copy;</span>"))}a.push("</div>","<div class='iconcaptcha-modal__fields'>","<input type='hidden' name='ic-hf-se' required />","<input type='hidden' name='ic-hf-id' value='".concat(D,"' required />"),"<input type='hidden' name='ic-hf-hp' required />","</div>"),a.push("</div>"),E.innerHTML=a.join(""),B=E.querySelector(".iconcaptcha-modal__body")}function l(){E.classList.remove("iconcaptcha-error"),E.querySelector("input[name='ic-hf-se']").setAttribute("value",null),IconCaptchaPolyfills.empty(B),B.insertAdjacentHTML("beforeend","<div class='iconcaptcha-modal__body-icons'></div>"),h(),IconCaptchaPolyfills.trigger(E,"refreshed",{captchaId:D})}function m(a,b){if(a!==void 0&&b!==void 0){K=!0,t(),a=g(a),b=g(b),E.querySelector("input[name=\"ic-hf-se\"]").setAttribute("value",[a,b,H].join(",")),E.querySelector("input[name=\"ic-hf-id\"]").setAttribute("value",D),C.style.display="none";var c=w({i:D,x:a,y:b,w:H,a:2});IconCaptchaPolyfills.ajax({url:f.general.validationPath,type:"POST",data:{payload:c},success:function(){return n()},error:function(){return o()}})}}function n(){B.classList.remove("captcha-opacity");var b=E.querySelector(".iconcaptcha-modal__body-selection");z(b);var g=E.querySelectorAll(".iconcaptcha-modal__header, .iconcaptcha-modal__footer, .iconcaptcha-modal__body");e(g,function(b){a.parentNode.removeChild(b)}),E.classList.add("iconcaptcha-success");var h=E.querySelector(".iconcaptcha-modal");h.innerHTML+="<div class=\"iconcaptcha-modal__body\">"+"<div class=\"iconcaptcha-modal__body-title\">".concat(f.messages.correct,"</div>")+"<div class=\"iconcaptcha-modal__body-checkmark\">".concat("<svg viewBox=\"0 0 98.5 98.5\" xml:space=\"preserve\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"checkmark\" d=\"M81.7 17.8C73.5 9.3 62 4 49.2 4 24.3 4 4 24.3 4 49.2s20.3 45.2 45.2 45.2 45.2-20.3 45.2-45.2c0-8.6-2.4-16.6-6.5-23.4L45.6 68.2 24.7 47.3\" fill=\"none\" stroke-miterlimit=\"10\" stroke-width=\"8\"/></svg>","</div>")+"<div class='iconcaptcha-modal__body-info'>"+"<a href='".concat(c,"' target='_blank' rel='follow' title='").concat(d,"'>IconCaptcha &copy;</a>")+"</div></div>",K=!1,IconCaptchaPolyfills.trigger(E,"success",{captchaId:D})}function o(a,b){var c=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2];B.classList.remove("captcha-opacity");var d=E.querySelector(".iconcaptcha-modal__body-selection");z(d),a=a||f.messages.incorrect.title,b=b||f.messages.incorrect.subtitle,E.classList.add("iconcaptcha-error"),B.innerHTML="<div class=\"iconcaptcha-modal__body-title\">".concat(a,"</div>")+"<div class=\"iconcaptcha-modal__body-subtitle\">".concat(b,"</div>"),K=!1,IconCaptchaPolyfills.trigger(E,"error",{captchaId:D}),c&&setTimeout(l,f.security.selectionResetDelay)}function p(){B.classList.add("captcha-opacity"),B.insertAdjacentHTML("beforeend","<div class=\"captcha-loader\"></div>")}function q(){var a;B.classList.remove("captcha-opacity");var b=B.querySelector(".captcha-loader");null===b||void 0===b||null===(a=b.parentNode)||void 0===a?void 0:a.removeChild(b)}function r(a){var b=a.style.backgroundImage.match(/\((.*?)\)/)[1].replace(/(['"])/g,""),c=new Image;c.onload=function(){return q()},c.src=b,c.complete&&c.onload(this)}function s(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(I=!1,F=!1,a){var b=w({i:D,a:3});IconCaptchaPolyfills.ajax({url:f.general.validationPath,type:"post",data:{payload:b},success:function(){IconCaptchaPolyfills.trigger(E,"invalidated",{captchaId:D}),j()},error:function(){return o()}})}else j()}function t(){null!==G&&(clearTimeout(G),G=null)}function u(a,b){if(a=parseInt(a),1===a){o(f.messages.timeout.title,f.messages.timeout.subtitle,!1);var c=E.querySelector(".iconcaptcha-modal__header");c.parentNode.removeChild(c),setTimeout(function(){return s(!1)},b)}}function v(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"";E.innerHTML="IconCaptcha Error: "+b,console.error("IconCaptcha Error: "+(""!==c)?c:b),a&&IconCaptchaPolyfills.trigger(E,"error",{captchaId:D})}function w(a){return btoa(JSON.stringify(a))}function x(){f.security.enableInitialMessage&&E.addEventListener("click",function(a){F||a.target instanceof HTMLAnchorElement||(F=!0,E.querySelector(".iconcaptcha-modal__body-circle").style.animationDuration="2s",E.querySelector(".iconcaptcha-modal__body-title").innerText=f.messages.initialization.loading,setTimeout(function(){E.classList.remove("iconcaptcha-init"),h()},f.security.initializeDelay))})}function y(a){var b=function(a){if(!(new Date-J<=f.security.clickDelay)&&(!f.security.hoverDetection||L)){var b=IconCaptchaPolyfills.offset(a.currentTarget),c=a.pageX-b.left,d=a.pageY-b.top;c&&d&&!B.classList.contains("captcha-opacity")&&(IconCaptchaPolyfills.trigger(E,"selected",{captchaId:D}),f.security.loadingAnimationDelay&&0<f.security.loadingAnimationDelay?(p(),setTimeout(function(){return m(c,d)},f.security.loadingAnimationDelay)):m(c,d))}},c=function(a){L&&!K&&I&&A(a)},d=function(a){C.style.display="inline",A(a),L=!0},e=function(){C.style.display="none",L=!1};for(var g in a._ic_listeners={click:b,mousemove:c,mouseenter:d,mouseleave:e},a._ic_listeners)a.addEventListener(g,a._ic_listeners[g])}function z(a){if(a&&a._ic_listeners)for(var b in a._ic_listeners)a.removeEventListener(b,a._ic_listeners[b])}function A(a){if(null!=a.currentTarget){var b=IconCaptchaPolyfills.offset(a.currentTarget);C.style.left=g(a.pageX-b.left)-8+"px",C.style.top=g(a.pageY-b.top)-7+"px"}}var B,C,D=b+1,E=a,F=!1,G=null,H=0,I=!1,J=0,K=!1,L=!1;return f.general.validationPath?void h():void v(!0,"The IconCaptcha was configured incorrectly.","The option `validationPath` has not been set.")};return a}();null!=window.jQuery&&function(a){a.fn.extend({iconCaptcha:function(a){for(var b=[],c=0;c<this.length;c++)b.push(this[c]);return IconCaptcha.$init(b,a)}})}(jQuery);